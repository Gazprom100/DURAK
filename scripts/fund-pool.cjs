require('dotenv').config();
const { ethers } = require('ethers');
const axios = require('axios');

/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –ø—É–ª–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞—É—Å–µ—Ç
 * –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ä–µ–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∫–æ—à–µ–ª–µ–∫ –ø—É–ª–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
 * –ø–æ–ø–æ–ª–Ω–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏.
 */
async function fundPoolWallet() {
  console.log('\nüí∏ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ DEL –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞ –ø—É–ª–∞...\n');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
  const poolAddress = process.env.GAME_POOL_ADDRESS;
  
  if (!poolAddress) {
    console.log('‚ùå –ö–æ—à–µ–ª–µ–∫ –ø—É–ª–∞ –∏–≥—Ä—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!');
    console.log('   –ó–∞–ø—É—Å—Ç–∏—Ç–µ setup.sh –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—à–µ–ª—å–∫–∞.');
    return;
  }
  
  console.log(`üìã –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –ø—É–ª–∞: ${poolAddress}`);
  
  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
    const provider = new ethers.providers.JsonRpcProvider(process.env.DECIMAL_CHAIN_RPC_URL || 'https://node.decimalchain.com/web3/');
    const initialBalance = await provider.getBalance(poolAddress);
    const initialEtherBalance = ethers.utils.formatEther(initialBalance);
    
    console.log(`üí∞ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: ${initialEtherBalance} DEL`);
    
    // –ó–∞–ø—Ä–æ—Å –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ñ–∞—É—Å–µ—Ç—É
    // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ—Ç URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –∞–¥—Ä–µ—Å —Ñ–∞—É—Å–µ—Ç–∞ —Å–µ—Ç–∏ DecimalChain
    console.log(`üì° –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ñ–∞—É—Å–µ—Ç—É...`);
    
    // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ —Ñ–∞—É—Å–µ—Ç—É
    // –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –∑–∞–ø—Ä–æ—Å –∫ API —Ñ–∞—É—Å–µ—Ç–∞
    console.log(`üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...`);
    
    // –í—ã–≤–æ–¥ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
    console.log('\n‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–∞—É—Å–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.');
    console.log('\n‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä—É—á–Ω–æ–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ—à–µ–ª—å–∫–∞ –ø—É–ª–∞:');
    console.log('   1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç DecimalChain');
    console.log('   2. –ù–∞–π–¥–∏—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞—É—Å–µ—Ç (–¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏)');
    console.log(`   3. –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –ø—É–ª–∞: ${poolAddress}`);
    console.log('   4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —Å–∞–π—Ç–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤');
    console.log('\nüìù –ü–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:');
    console.log('   node scripts/check-wallet.js');
    console.log('   –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞.');
    
  } catch (error) {
    console.log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
  }
}

fundPoolWallet(); 